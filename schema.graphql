# -----------------------------------------------
# !!! THIS FILE WAS GENERATED BY TYPE-GRAPHQL !!!
# !!!   DO NOT MODIFY THIS FILE BY YOURSELF   !!!
# -----------------------------------------------

type Channel {
  id: ID!
  type: ChannelType!
  isPublic: Boolean!
  parent: Channel
  parentId: ID
  children: [Channel!]!
  name: String!
  topic: String!
  description: String!
  created: Date!
  modified: Date!
  isArchived: Boolean!
  owner: User!
  ownerId: ID!
  messages(after: ID, limit: Int): [Message!]!
  invitations: [Invitation!]!
  members: [Members!]!
}

type ChannelEvent {
  newMessage: Message
  messageDeleted: ID
  messageEdited: Message
  messagePreview: PreviewMessage
  channelDeleted: Boolean
  needResubscribe: Boolean
  publishTime: Date!
  channelId: ID!
}

enum ChannelType {
  Game
  Discuss
}

type Content {
  """Message plain text."""
  text: String!

  """Message rich text entities."""
  entities: [JSONObject!]!

  """Random seed."""
  seed: Int!
}

"""Date custom scalar type"""
scalar Date

type Invitation {
  token: String!
  channel: Channel!
  channelId: ID!
  creator: User!
  creatorId: ID!
  expiration: Date!
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject

type Login {
  token: String!
  user: User!
}

type Media {
  id: ID!
  uploader: User
  uploaderId: ID
  filename: String!
  originalFilename: String
  mimeType: String!
  hash: String!
  size: Int!
  description: String!
  created: Date!
}

type Members {
  user: User!
  userId: ID!
  channel: Channel!
  channelId: ID!
  isMaster: Boolean!
  joinDate: Date!
  character: String!
  isOnline: Boolean!
}

type Message {
  id: ID!
  type: MessageType!
  sender: User
  senderId: ID
  channel: Channel!
  channelId: ID!
  name: String!

  """Whether this message represents an action."""
  isAction: Boolean!
  isMaster: Boolean!
  isPinned: Boolean!
  isHidden: Boolean!

  """If the list is not empty, it represents this is a whisper message."""
  whisperTo: [ID!]!
  media: Media
  mediaId: ID
  parent: ID
  parentId: ID
  crossOff: Boolean!
  created: Date!
  orderDate: Date!
  orderOffset: Int!
  modified: Date!
  editDate: Date
  content: Content
}

enum MessageType {
  Say
  OOC
  Joined
  Left
}

type Mutation {
  sendMessage(isOOC: Boolean = true, mediaId: ID, id: ID, whisperTo: [ID!] = [], hide: Boolean = false, name: String!, channelId: ID!, entities: [JSONObject!]!, text: String!): Message
  sendMessageSource(isOOC: Boolean = true, mediaId: ID, id: ID, whisperTo: [ID!] = [], hide: Boolean = false, isExpression: Boolean = true, name: String!, channelId: ID!, source: String!): Message! @deprecated(reason: "Don't use, just for development.")
  sendMessagePreview(
    mediaId: ID
    isExpression: Boolean = false
    startTime: Date!
    name: String!
    channelId: ID!

    """If blank, just show typing."""
    source: String!
    id: ID!
  ): Boolean!
  editMessage(isOOC: Boolean, name: String, entities: [JSONObject!]!, text: String!, messageId: String!): Message!
  setMessageCrossOff(crossOff: Boolean = true, messageId: ID!): Message!
  deleteMessage(messageId: ID!): Boolean!
  moveAfterOf(target: ID!, messageId: ID!): Message!
  moveBeforeOf(target: ID!, messageId: ID!): Message!
  register(nickname: String!, password: String!, username: String!): User!

  """Keep alive."""
  ping: Boolean!
  createChannel(parentId: ID, description: String = "", isPublic: Boolean = true, isGame: Boolean = false, name: String!): Channel!
  joinChannel(userId: ID, channelId: ID!): Members
  quitChannel(channelId: ID!): Boolean!
  deleteChannel(channelId: ID!): Boolean!
  setMaster(master: Boolean!, userId: ID!, channelId: ID!): Members!
}

type PreviewMessage {
  id: ID!
  isExpression: Boolean!
  userId: ID!
  channelId: ID!
  name: String!
  source: String!
  startTime: Date!
  updateTime: Date!
  media: Media
}

type Query {
  getMessageById(id: ID!): Message!
  getUserById(id: ID!): User
  getUserByUsername(username: String!): User

  """Keep alive."""
  ping: Boolean!
  getMe: User
  myChannels: [Members!]!

  """Get all channels."""
  channels: [Channel!]!
  getChannelById(id: ID!): Channel
  getMediaInfo(id: ID!): Media
  login(password: String!, username: String!): Login
}

type Subscription {
  channelEvent(channelId: ID!): ChannelEvent!
}

type User {
  id: ID!
  username: String!
  nickname: String!
  created: Date!
  avatar: Media
  avatarMediaId: ID
  isOnline: Boolean!
}
